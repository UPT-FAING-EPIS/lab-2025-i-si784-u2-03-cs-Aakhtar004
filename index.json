{
  "README.html": {
    "href": "README.html",
    "title": "SESION DE LABORATORIO N° 03: PRUEBAS UNITARIAS CON NUNIT | Lab3_docs",
    "summary": "SESION DE LABORATORIO N° 03: PRUEBAS UNITARIAS CON NUNIT OBJETIVOS Comprender el funcionamiento de las pruebas unitarias dentro de una aplicación utilizando el Framework de pruebas NUnit. REQUERIMIENTOS Conocimientos: Conocimientos básicos de Bash (powershell). Conocimientos básicos de Contenedores (Docker). Hardware: Virtualization activada en el BIOS.. CPU SLAT-capable feature. Al menos 4GB de RAM. Software: Windows 10 64bit: Pro, Enterprise o Education (1607 Anniversary Update, Build 14393 o Superior) Docker Desktop Powershell versión 7.x Net 6 o superior Visual Studio Code CONSIDERACIONES INICIALES Clonar el repositorio mediante git para tener los recursos necesarios DESARROLLO Iniciar la aplicación Powershell o Windows Terminal en modo administrador Ejecutar el siguiente comando para crear una nueva solución dotnet new sln -o Bank Acceder a la solución creada y ejecutar el siguiente comando para crear una nueva libreria de clases y adicionarla a la solución actual. cd Bank dotnet new classlib -o Bank.Domain dotnet sln add ./Bank.Domain/Bank.Domain.csproj Ejecutar el siguiente comando para crear un nuevo proyecto de pruebas y adicionarla a la solución actual dotnet new nunit -o Bank.Domain.Tests dotnet sln add ./Bank.Domain.Tests/Bank.Domain.Tests.csproj dotnet add ./Bank.Domain.Tests/Bank.Domain.Tests.csproj reference ./Bank.Domain/Bank.Domain.csproj Iniciar Visual Studio Code (VS Code) abriendo el folder de la solución como proyecto. En el proyecto Bank.Domain, si existe un archivo Class1.cs proceder a eliminarlo. Asimismo en el proyecto Bank.Domain.Tests si existiese un archivo UnitTest1.cs, también proceder a eliminarlo. En VS Code, en el proyecto Bank.Domain proceder a crear el archivo BankAccount.cs e introducir el siguiente código: namespace Bank.Domain { public class BankAccount { private readonly string m_customerName; private double m_balance; private BankAccount() { } public BankAccount(string customerName, double balance) { m_customerName = customerName; m_balance = balance; } public string CustomerName { get { return m_customerName; } } public double Balance { get { return m_balance; } } public void Debit(double amount) { if (amount > m_balance) throw new ArgumentOutOfRangeException(\"amount\"); if (amount < 0) throw new ArgumentOutOfRangeException(\"amount\"); m_balance += amount; // intentionally incorrect code } public void Credit(double amount) { if (amount < 0) throw new ArgumentOutOfRangeException(\"amount\"); m_balance += amount; } public static void Main() { BankAccount ba = new BankAccount(\"Mr. Bryan Walton\", 11.99); ba.Credit(5.77); ba.Debit(11.22); Console.WriteLine(\"Current balance is ${0}\", ba.Balance); } } } Luego en el proyecto Bank.Domain.Tests añadir un nuevo archivo BanckAccountTests.cs e introducir el siguiente código: using Bank.Domain; using NUnit.Framework; namespace Bank.Domain.Tests { public class BankAccountTests { [Test] public void Debit_WithValidAmount_UpdatesBalance() { // Arrange double beginningBalance = 11.99; double debitAmount = 4.55; double expected = 7.44; BankAccount account = new BankAccount(\"Mr. Bryan Walton\", beginningBalance); // Act account.Debit(debitAmount); // Assert double actual = account.Balance; Assert.AreEqual(expected, actual, 0.001, \"Account not debited correctly\"); } } } Abrir un terminal en VS Code (CTRL + Ñ) o vuelva al terminal anteriormente abierto, y ejecutar los comandos: dotnet test --collect:\"XPlat Code Coverage\" El paso anterior debe producir un error por lo que sera necesario escribir el código mecesario para que el test funcione. Failed! - Failed: 1, Passed: 0, Skipped: 0, Total: 1, Duration: < 1 ms En el proyecto Bank.Domain, modificar la clase BankAccount, en la linea 21 con el siguiente contenido: m_balance -= amount; Ejecutar nuevamente el pase 8 y ahora deberia devolver algo similar a lo siguiente: Passed! - Failed: 0, Passed: 1, Skipped: 0, Total: 1, Duration: < 1 ms Con la finalidad de aumentar la confienza en la aplicación, se ampliará el rango de pruebas para lo cual editar la clase de prueba BankAccountTests y adicionar el método siguiente que contempla un escenario de prueba diferente: [Test] public void Debit_WhenAmountIsLessThanZero_ShouldThrowArgumentOutOfRange() { // Arrange double beginningBalance = 11.99; double debitAmount = -100.00; BankAccount account = new BankAccount(\"Mr. Bryan Walton\", beginningBalance); // Act and assert Assert.Throws<System.ArgumentOutOfRangeException>(() => account.Debit(debitAmount)); } Ejecutar nuevamente el paso 8 para lo cual se obtendra una respuesta similar a la siguiente: Passed! - Failed: 0, Passed: 2, Skipped: 0, Total: 2, Duration: 9 ms Ahora es tiempo de mejorar el código y refactorizar, para lo cual modificar la clase BankAccount de la siguiente manera: using System; namespace Bank.Domain { public class BankAccount { public const string DebitAmountExceedsBalanceMessage = \"Debit amount exceeds balance\"; public const string DebitAmountLessThanZeroMessage = \"Debit amount is less than zero\"; private readonly string m_customerName; private double m_balance; private BankAccount() { } public BankAccount(string customerName, double balance) { m_customerName = customerName; m_balance = balance; } public string CustomerName { get { return m_customerName; } } public double Balance { get { return m_balance; } } public void Debit(double amount) { if (amount > m_balance) throw new ArgumentOutOfRangeException(\"amount\", amount, DebitAmountExceedsBalanceMessage); if (amount < 0) throw new ArgumentOutOfRangeException(\"amount\", amount, DebitAmountLessThanZeroMessage); m_balance -= amount; } public void Credit(double amount) { if (amount < 0) throw new ArgumentOutOfRangeException(\"amount\"); m_balance += amount; } } } Adicionar el siguiente método de prueba en la clase BankAccountTests, que permitira verificar si el monto de retiro es mayor al saldo de la cuenta. [Test] public void Debit_WhenAmountIsMoreThanBalance_ShouldThrowArgumentOutOfRange() { // Arrange double beginningBalance = 11.99; double debitAmount = 20.0; BankAccount account = new BankAccount(\"Mr. Bryan Walton\", beginningBalance); // Act try { account.Debit(debitAmount); } catch (System.ArgumentOutOfRangeException e) { // Assert StringAssert.Contains(BankAccount.DebitAmountExceedsBalanceMessage, e.Message); } } Volver a ejecutar el paso 8 y verificar el resultado, debería ser similar a lo siguiente Passed! - Failed: 0, Passed: 3, Skipped: 0, Total: 3, Duration: 12 ms Finalmente proceder a verificar la cobertura, dentro del proyecto Primes.Tests se dede haber generado una carpeta o directorio TestResults, en el cual posiblemente exista otra subpcarpeta o subdirectorio conteniendo un archivo con nombre coverage.cobertura.xml, si existe ese archivo proceder a ejecutar los siguientes comandos desde la linea de comandos abierta anteriomente, de los contrario revisar el paso 8: dotnet tool install -g dotnet-reportgenerator-globaltool ReportGenerator \"-reports:./*/*/*/coverage.cobertura.xml\" \"-targetdir:Cobertura\" -reporttypes:HTML El comando anterior primero proceda instalar una herramienta llamada ReportGenerator (https://reportgenerator.io/) la cual mediante la segunda parte del comando permitira generar un reporte en formato HTML con la cobertura obtenida de la ejecución de las pruebas. Este reporte debe localizarse dentro de una carpeta llamada Cobertura y puede acceder a el abriendo con un navegador de internet el archivo index.htm. Actividades Encargadas Adicionar los escenarios, casos de prueba, metodos de prueba y modificaciones para verificar el método de crédito. Completar la documentación del Clases, atributos y métodos para luego generar una automatización (publish_docs.yml) que genere la documentación utilizando DocFx y la publique en una Github Page Generar una automatización (publish_cov_report.yml) que: * Compile el proyecto y ejecute las pruebas unitarias, * Genere el reporte de cobertura, * Publique el reporte en Github Page Generar una automatización (release.yml) que: * Genere el nuget con su codigo de matricula como version del componente, * Publique el nuget en Github Packages, * Genere el release correspondiente"
  },
  "api/Bank.Domain.BankAccount.html": {
    "href": "api/Bank.Domain.BankAccount.html",
    "title": "Class BankAccount | Lab3_docs",
    "summary": "Class BankAccount Namespace Bank.Domain Assembly Bank.Domain.dll Represents a bank account with basic debit and credit operations. public class BankAccount Inheritance object BankAccount Inherited Members object.Equals(object) object.Equals(object, object) object.GetHashCode() object.GetType() object.MemberwiseClone() object.ReferenceEquals(object, object) object.ToString() Constructors BankAccount(string, double) Initializes a new instance of the BankAccount class. public BankAccount(string customerName, double balance) Parameters customerName string The name of the customer. balance double The initial balance. Fields DebitAmountExceedsBalanceMessage Message shown when debit amount exceeds balance. public const string DebitAmountExceedsBalanceMessage = \"Debit amount exceeds balance\" Field Value string DebitAmountLessThanZeroMessage Message shown when debit amount is less than zero. public const string DebitAmountLessThanZeroMessage = \"Debit amount is less than zero\" Field Value string Properties Balance Gets the current balance. public double Balance { get; } Property Value double CustomerName Gets the name of the customer. public string CustomerName { get; } Property Value string Methods Credit(double) Credits the specified amount to the account. public void Credit(double amount) Parameters amount double The amount to credit. Exceptions ArgumentOutOfRangeException Thrown when amount is less than zero. Debit(double) Debits the specified amount from the account. public void Debit(double amount) Parameters amount double The amount to debit. Exceptions ArgumentOutOfRangeException Thrown when amount is less than zero or exceeds balance."
  },
  "api/Bank.Domain.html": {
    "href": "api/Bank.Domain.html",
    "title": "Namespace Bank.Domain | Lab3_docs",
    "summary": "Namespace Bank.Domain Classes BankAccount Represents a bank account with basic debit and credit operations."
  },
  "docs/getting-started.html": {
    "href": "docs/getting-started.html",
    "title": "Getting Started | Lab3_docs",
    "summary": "Getting Started"
  },
  "docs/introduction.html": {
    "href": "docs/introduction.html",
    "title": "Introduction | Lab3_docs",
    "summary": "Introduction"
  },
  "index.html": {
    "href": "index.html",
    "title": "This is the HOMEPAGE. | Lab3_docs",
    "summary": "This is the HOMEPAGE. Refer to Markdown for how to write markdown files. Quick Start Notes: Add images to the images folder if the file is referencing an image."
  }
}